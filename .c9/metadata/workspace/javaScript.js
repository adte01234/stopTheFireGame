{"changed":true,"filter":false,"title":"javaScript.js","tooltip":"/javaScript.js","ace":{"folds":[],"scrolltop":2459.5,"scrollleft":0,"selection":{"start":{"row":216,"column":0},"end":{"row":216,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"hash":"b538f4351fa1f6abd6f68c9dea0e577aaaca9dc2","value":"var canvas = document.getElementById(\"canvas\"),\n    ctx = canvas.getContext(\"2d\");\nvar forestsLeft =3;\nvar drawBullets = false;\nvar waitForNextShot = false;  \nvar locked = false; \ncanvas.width = 1900;\ncanvas.height = 916;\n\nvar mobsScore = 0;\nvar XposWall = 500;\n\nvar Song = new Audio(\"MainTheme.mp3\");\n\nSong.play();\n\nvar johnCena = new Audio(\"John Cena - AND HIS NAME IS JOHN CENA.mp3\"); \n\nvar x= 500;  //initial x\nvar y= 500;  // initial y\nvar velY= 0;\nvar velX= 0;\nvar speed= 8; // max speed\nvar friction= 0.9; // friction\nvar keys= [];\nvar powerup = [];\n\nvar background = document.createElement('img');\nbackground.src = \"Images/background.png\";\n\nvar player = document.createElement('img');\nplayer.src = \"Images/Tiny.png\";\n\nvar wallY1 = 400;\nvar wallY2 = 550;\nvar wallY3 = 700;\n\nvar upgradeTotalCost = 0;\n\nvar turret1 = false;\nvar turret2 = false;\nvar turret3 = false;\n\nvar wall1 = false;\nvar wall2 = false;\nvar wall3 = false;\n\nvar Trump = new Image();\nTrump.src = \"Images/WaterTurret.png\";\n\nvar Gun = new Image();\nGun.src = \"Images/WaterTurret.png\";\n\nvar XposTurret = XposWall - 15;\n\nvar XposWall = 450;\nvar ammunition = INITIAL_AMMUNITION = 20;\n\nvar droppedDroplet = {dropletX: 0, dropletY: 0, status: 0}; \nvar droppedDroplets = []; \n\nvar playerXCor; \nvar playerYCor; \n\nvar songPlaying = true; \nfunction Wall()//this function is used for building walls\n{\n    if (wall1 == true)\n    {ctx.drawImage(Trump,XposWall,wallY1,125,115)}\n    if (wall2 == true)\n    {ctx.drawImage(Trump,XposWall,wallY2,125,115)}\n    if (wall3 == true)\n    {ctx.drawImage(Trump,XposWall,wallY3,125,115)}\n    \n    for (var j = 0; j < mobFireArray.length; j++)\n    {\n        \n        if (mobFireArray[j].mobXPos < XposWall && mobFireArray[j].mobYPos == wallY1 && wall1)\n        {   mobFireArray.splice(j, 1);\n            wall1 = false;\n           \n        }\n        \n        if (mobFireArray[j].mobXPos < XposWall && mobFireArray[j].mobYPos == wallY2 && wall2)\n        {   mobFireArray.splice(j, 1);\n            wall2 = false;\n        }\n        \n        if (mobFireArray[j].mobXPos < XposWall && mobFireArray[j].mobYPos == wallY3 && wall3)\n        {   mobFireArray.splice(j, 1);\n            wall3 = false;\n        }\n    }\n    \n    for (var l = 0; l < speedFireMobArray.length; l++)\n    {\n        \n        if (speedFireMobArray[l].mobXPos < XposTurret && speedFireMobArray[l].mobYPos == wallY1 && turret1)\n        {   speedFireMobArray.splice(l, 1);\n            turret1 = false;\n            \n        }\n        \n        if (speedFireMobArray[l].mobXPos < XposTurret && speedFireMobArray[l].mobYPos == wallY2 && turret2)\n        {   speedFireMobArray.splice(l, 1);\n            turret2 = false;\n        }\n        \n        if (speedFireMobArray[l].mobXPos < XposTurret && speedFireMobArray[l].mobYPos == wallY3 && turret3)\n        {   speedFireMobArray.splice(l, 1);\n            turret3 = false;\n        }\n    }\n    \n}\n\nfunction Turret()//this function is used for building walls\n{\n    if (turret1 == true)\n    {ctx.drawImage(Gun,XposTurret,wallY1,125,115)}\n    if (turret2 == true)\n    {ctx.drawImage(Gun,XposTurret,wallY2,125,115)}\n    if (turret3 == true)\n    {ctx.drawImage(Gun,XposTurret,wallY3,125,115)}\n    \n    for (var j = 0; j < mobFireArray.length; j++)\n    {\n        \n        if (mobFireArray[j].mobXPos < XposTurret && mobFireArray[j].mobYPos == wallY1 && turret1)\n        {   mobFireArray.splice(j, 1);\n            turret1 = false;\n            \n        }\n        \n        if (mobFireArray[j].mobXPos < XposTurret && mobFireArray[j].mobYPos == wallY2 && turret2)\n        {   mobFireArray.splice(j, 1);\n            turret2 = false;\n        }\n        \n        if (mobFireArray[j].mobXPos < XposTurret && mobFireArray[j].mobYPos == wallY3 && turret3)\n        {   mobFireArray.splice(j, 1);\n            turret3 = false;\n        }\n    }\n    \n    for (var l = 0; l < speedFireMobArray.length; l++)\n    {\n        \n        if (speedFireMobArray[l].mobXPos < XposTurret && speedFireMobArray[l].mobYPos == wallY1 && turret1)\n        {   speedFireMobArray.splice(l, 1);\n            turret1 = false;\n            \n        }\n        \n        if (speedFireMobArray[l].mobXPos < XposTurret && speedFireMobArray[l].mobYPos == wallY2 && turret2)\n        {   speedFireMobArray.splice(l, 1);\n            turret2 = false;\n        }\n        \n        if (speedFireMobArray[l].mobXPos < XposTurret && speedFireMobArray[l].mobYPos == wallY3 && turret3)\n        {   mobFireArray.splice(l, 1);\n            turret3 = false;\n        }\n    }\n    \n}\n\n\nfunction Shop()\n{\n    // ZXC for the first second and third water turret\n    //123 for the first second and third wall\n    \n    if (scoreForFunction >= 50 && ableToBuy != false) {\n        \n   \n    if (keys[49] && wall1 != true) {\n        upgradeTotalCost += 50;\n        wall1 = true;\n        mobsScore -= 50;\n       \n    }\n    else if (keys[50] && wall2 != true) \n        upgradeTotalCost += 50;\n        wall2 = true;\n        mobsScore -= 50;\n       \n    }\n    else if (keys[51] && wall3 != true)\n    {\n        upgradeTotalCost += 50;\n        wall3 = true;\n        mobsScore -= 50;\n       \n    }\n    \n    if (keys[90] && turret1 != true) {\n        upgradeTotalCost += 50;\n        turret1 = true;\n        mobsScore -= 50;\n       \n    }\n    else if (keys[88] && turret2 != true) {\n        upgradeTotalCost += 50;\n        turret2= true;\n        mobsScore-= 50;\n        \n    }\n    else if (keys[67] && turret3 != true)\n    {\n        upgradeTotalCost += 50;\n        turret3 = true;\n        mobsScore -= 50;\n        \n    }\n}\n\nfunction update() {\n    \n    \n    // check the keys and do the movement.\n    if (keys[38]) {\n        if (velY > -speed) {\n            velY--;\n        }\n    }\n\n    if (keys[40]) {\n        if (velY < speed) {\n            velY++;\n        }\n    }\n    if (keys[39]) {\n        if (velX < speed) {\n            velX++;\n        }\n    }\n    if (keys[37]) {\n        if (velX > -speed) {\n            velX--;\n        }\n    }\n\n    // apply some friction to y velocity.\n    velY *= friction;\n    y += velY;\n\n    // apply some friction to x velocity.\n    velX *= friction;\n    x += velX;\n\n    // bounds checking\n    if (x >= 1820) {\n        x = 1820;\n    } else if (x <= 400) {\n        x = 400;\n    }\n\n    if (y > 700) {\n        y = 700;\n    } else if (y <= 370) {\n        y = 370;\n    }\n\n    // do the drawing\n   mobsScore = (mobsKilled*10 + extraMobsKilled*20);\n   scoreForFunction = mobsScore - upgradeTotalCost;\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\tctx.drawImage(background,0,0,1900,1200);\n\t//ctx.drawImage(player, x, y);\n\tdrawJoe(x, y);\n\tShop();\n\tWall();\n\tTurret();\n\tvar mobsScore = (mobsKilled*10 + extraMobsKilled*30 + speedMobsKilled*15);\n\tvar scoreForFunction = (mobsScore - upgradeTotalCost);\n    drawScore(scoreForFunction);\n    \n\tforestDraw();\n\tif (gameStart) {\n\tdrawMob();\n\t}\n\tif (extraFireMobArray.length > 0) {\n\tdrawExtraMob();  \n\t}\n\tif (speedFireMobArray.length > 0) {\n\t    drawSpeedMob();\n\t    \n\t}\n\tdropADroplet(); \n\tkillMob(); \n\tgatherBullets(); \n\t\n\tif (ammunition > 0) {\n        displayText(\"Ammo: \" + ammunition, canvas.width - 500, 100);\n        if (ammunition > 0 && ammunition <= 15) {\n            displayText(\"LOW AMMO!!\", canvas.width - 500, 200); \n        }\n        \n        if (ammunition > 0  && ammunition >= 100) {\n            displayText(\"KEEP WRECKING!!!\", canvas.width - 500, 200); \n        }\n        \n        if (ammunition > 0 && ammunition >= 200) {\n            displayText(\"\", canvas.width - 500, 200); \n        }\n    }\n    \n    \n    if (mobsKilled < 110 && mobsKilled > 100 || mobsKilled < 410 && mobsKilled > 400 || mobsKilled < 810 && mobsKilled > 800) {\n        johnCena.play(); \n        songPlaying = false; \n    }\n\t//Displays the number of remaining bullets\n\t//Shoots water droplets, prevents spam\n    shootingHandler(); \n}\nsetInterval(update, 10);\nupdate();\n\nfunction dropADroplet() {\n    for (var i = 0; i < droppedDroplets.length; i++) {\n        if (droppedDroplets[i].status == 1) {\n            ctx.beginPath();\n            ctx.arc(droppedDroplets[i].dropletX, droppedDroplets[i].dropletY, dropletRadius, 0, Math.PI * 2);\n            ctx.fillStyle = \"#FB2C1B\";\n            ctx.fill(); \n            ctx.closePath();\n        }\n    }    \n}\n\nfunction shootingHandler() {\n\t//Displays bullets left\n\tdisplayText(\"Ammo: \" + ammunition, canvas.width - 500, 100);\n\t\n    gatherBullets(); \n\tif(drawBullets) {\n        shootWaterDroplet();\n\t}\n    if (locked) {\n        return;\n    }\n    \n\n    locked = true; \n    if (keys[83] && ammunition > 0 && keys[107] && ammunition > 0) {\n        ammunition--;\n        drawBullets = true;\n        dropletXCor = x + velX + 55; \n        dropletYCor = y + velY + 78;\n        addDroplet(dropletXCor, dropletYCor, 1);\n    }\n    setTimeout(function(){ locked = false;},200);    \n}\n\nfunction addDroplet(xCor, yCor, statusNum) {\n    waterDroplet = {waterX: xCor, waterY: yCor, status: statusNum}\n    droplets.push(waterDroplet);\n    if (droplets.length == 1) {\n        drawBullets = true;\n    }\n}\n\nfunction displayText(text, xCor, yCor) { \n    ctx.font = \"50px Impact\";\n    ctx.fillStyle='#FB2C1B';\n    ctx.fillText(text,xCor,yCor);\n}\n\nfunction gatherBullets() {\n    playerXCor = x + velX;\n    playerYCor = y + velY;\n    \n    for (var i = 0; i < droppedDroplets.length; i++) {\n        if (droppedDroplets[i].dropletX > playerXCor && droppedDroplets[i].dropletX < playerXCor + 150 && droppedDroplets[i].dropletY > playerYCor && droppedDroplets[i].dropletY < playerYCor + 150) {\n            \n            droppedDroplets[i].status = 0;\n            droppedDroplets.splice(i, 1);\n            \n            ammunition += 2; \n        }\n    }\n}\n\nfunction killMob() {\n    for (var i = 0; i < mobFireArray.length; i++) {\n        for (var b = 0; b < droplets.length; b++) {\n\t\t\tif(mobsKilled <= 150){\n            if (droplets[b].waterX + dropletRadius > mobFireArray[i].mobXPos + 15 && droplets[b].waterY > mobFireArray[i].mobYPos && droplets[b].waterY < mobFireArray[i].mobYPos + 150) {\n                mobsKilled++;\n            \n                \n                mobFireArray[i].status = 0;\n                mobFireArray.splice(i, 1);\n                \n                droppedDroplet = {dropletX: droplets[b].waterX, dropletY: droplets[b].waterY, status: 1};\n                droppedDroplets.push(droppedDroplet);\n \n                droplets[b].status = 0;\n                droplets.splice(b, 1);\n                \n\t\t\t}\n            }\n\t\t\telse if((150 < mobsKilled) && (mobsKilled <= 300)){\n\t\t\t\tif (droplets[b].waterX + dropletRadius > mobFireArray[i].mobXPos + 15 && droplets[b].waterY > mobFireArray[i].mobYPos && droplets[b].waterY < mobFireArray[i].mobYPos + 150) {\n                mobsKilled++;\n\t\t\t\tmobLife--;\n                \n                droppedDroplet = {dropletX: droplets[b].waterX, dropletY: droplets[b].waterY, status: 1};\n                droppedDroplets.push(droppedDroplet);\n                dropADroplet();\n                \n\t\t\t\tif(mobLife<=0){\n                mobFireArray[i].status = 0;\n                mobFireArray.splice(i, 1);\n\t\t\t\tmobLife = 2;\n\t\t\t\t}\n \n                droplets[b].status = 0;\n                droplets.splice(b, 1);\n                \n\t\t\t}\n            }\n\t\t\telse if(300 < mobsKilled){\n\t\t\t\tif (droplets[b].waterX + dropletRadius > mobFireArray[i].mobXPos + 15 && droplets[b].waterY > mobFireArray[i].mobYPos && droplets[b].waterY < mobFireArray[i].mobYPos + 150) {\n                mobsKilled++;\n\t\t\t\tmobLifev2--;\n                \n                droppedDroplet = {dropletX: droplets[b].waterX, dropletY: droplets[b].waterY, status: 1};\n                droppedDroplets.push(droppedDroplet);\n                dropADroplet();\n                \n\t\t\t\tif(mobLifev2<=0){\n                mobFireArray[i].status = 0;\n                mobFireArray.splice(i, 1);\n\t\t\t\tmobLifev2 = 3;\n\t\t\t\t}\n \n                droplets[b].status = 0;\n                droplets.splice(b, 1);\n                \n\t\t\t}\n            }\n        }\n    }\n    \n    for (var i = 0; i< extraFireMobArray.length; i++) {\n        for (var b = 0; b < droplets.length; b++) {\n            if (droplets[b].waterX + dropletRadius > extraFireMobArray[i].mobXPos + 15 && droplets[b].waterY > extraFireMobArray[i].mobYPos + 25 && droplets[b].waterY < extraFireMobArray[i].mobYPos + 250) {\n                mobsKilled++;\n                bossLife--;\n                \n                if(bossLife <= 0){\n                    extraFireMobArray[i].status = 0;\n                    extraFireMobArray.splice(i, 1);\n\t\t\t\t\tif(incr <= 11){\n                    bossLife = incr+2;\n\t\t\t\t\tincr = incr+2;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\tbossLife = 11;\n\t\t\t\t\t}\n                }\n                \n                droplets[b].status = 0;\n                droplets.splice(b, 1);\n        \n            }    \n        }   \n    }\n    \n    \n    for (var i = 0; i < speedFireMobArray.length; i++){\n\t\tfor (var b = 0; b < droplets.length; b++) {\n\t\t\t            if (droplets[b].waterX + dropletRadius > speedFireMobArray[i].mobXPos + 15 && droplets[b].waterY > speedFireMobArray[i].mobYPos && droplets[b].waterY < speedFireMobArray[i].mobYPos + 150) {\n\t\t\t\t\t\t\tconsole.log(speedFireMobArray[i].mobXPos);\n                \t\t\tspeedMobsKilled++;\n\n\t\t\t\t\t\t\tdroppedDroplet = {dropletX: droplets[b].waterX, dropletY: droplets[b].waterY, status: 1};\n\t\t\t\t\t\t\tdroppedDroplets.push(droppedDroplet);\n\t\t\t\t\t\t\tdropADroplet();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tspeedFireMobArray.splice(i, 1); \n\t\t\t\t\t\t\tdroplets[b].status = 0;\n                \t\t\tdroplets.splice(b, 1);\n            }\n\t\t\t\n\t\t}\n\t}\n    \n    \n}\n\n\n// key events\ndocument.body.addEventListener(\"keydown\", function (e) {\n    keys[e.keyCode] = true;\n});\ndocument.body.addEventListener(\"keyup\", function (e) {\n    keys[e.keyCode] = false;\n});\n\n","undoManager":{"mark":14,"position":14,"stack":[[{"start":{"row":346,"column":15},"end":{"row":346,"column":16},"action":"remove","lines":["7"],"id":2}],[{"start":{"row":346,"column":14},"end":{"row":346,"column":15},"action":"remove","lines":["0"],"id":3}],[{"start":{"row":346,"column":13},"end":{"row":346,"column":14},"action":"remove","lines":["1"],"id":4}],[{"start":{"row":346,"column":13},"end":{"row":346,"column":14},"action":"insert","lines":["8"],"id":5}],[{"start":{"row":346,"column":14},"end":{"row":346,"column":15},"action":"insert","lines":["3"],"id":6}],[{"start":{"row":346,"column":34},"end":{"row":346,"column":35},"action":"insert","lines":[" "],"id":7}],[{"start":{"row":346,"column":35},"end":{"row":346,"column":36},"action":"insert","lines":["&"],"id":8}],[{"start":{"row":346,"column":36},"end":{"row":346,"column":37},"action":"insert","lines":["&"],"id":9}],[{"start":{"row":346,"column":37},"end":{"row":346,"column":38},"action":"insert","lines":[" "],"id":10}],[{"start":{"row":346,"column":38},"end":{"row":346,"column":64},"action":"insert","lines":["keys[83] && ammunition > 0"],"id":11}],[{"start":{"row":346,"column":44},"end":{"row":346,"column":45},"action":"remove","lines":["3"],"id":12}],[{"start":{"row":346,"column":43},"end":{"row":346,"column":44},"action":"remove","lines":["8"],"id":13}],[{"start":{"row":346,"column":43},"end":{"row":346,"column":44},"action":"insert","lines":["1"],"id":14}],[{"start":{"row":346,"column":44},"end":{"row":346,"column":45},"action":"insert","lines":["0"],"id":15}],[{"start":{"row":346,"column":45},"end":{"row":346,"column":46},"action":"insert","lines":["7"],"id":16}]]},"timestamp":1471291809000}